# RandomRollCall
2022秋软工实践 第二次结对编程作业
## 环境搭建
在运行之前请确保自己已安装任一可编译运行c++代码的软件并完成配置   
如Visual Studio、devcpp  
下载链接：[Visual Studio](https://visualstudio.microsoft.com/zh-hans/vs/")

## 运行步骤

### 1、数据生成

- 运行数据集生成器（data generator.cpp),通过outfile一次生成随机的5组数据自动存放在txt文件output1.txt，output2.txt，output3.txt，output4.txt、output5.txt。  
 
### 2、导入txt并生成E值

- 运行后会直接显示刚才生成的5个output算出的E值

## 设计思路

### 生成数据设计

- 把未缺勤赋值为1，缺勤赋值为0，绩点分布在1-4之间，按照绩点排名分段抽过去缺勤系数，最后将数据随机打乱。
- 每一行的数据依次代表五个班级中90个人的绩点信息、缺勤系数、20次课的考勤情况。  
- 生成结果与data generator.cpp在同一路径下，可点开生成的txt文件查看具体数据。
- 通过infile读出txt数据并且存放到点名程序的结构体中，在点名程序random roll call.cpp中收集5组数据并生成随机所点名的人，计数，与实际缺勤情况相比对，得出E值并输出。  
- 利用Sleep()使得每次生成都不一样

### 算法设计

- 由于评价标准为E=五门课程的有效点名次数/总请求次数，即random roll call.cpp中的numerator / denominator，最大化E使得抽点的里面找出缺勤的可能性更大。
- 在每一次处理数据之前进行缺勤系数和绩点的sort，缺勤系数大的排在前面，若缺勤系数一致则绩点低的同学排在前面。
- 把整个抽取看做两部分来处理，一部分是针对长期不到的，由于缺勤系数累加会一直排在前列，另一部分是偶尔不到的进行除前列几个外的抽取，每次rand()%4生成不同次课抽几个，对两部分抽取人人数的调整影响E值大小，对两部分经过十次数据生成产生的样本得到E值的方差和均值及计算。  
| 算法  | E的均值 | E的方差 |
| ------ | ------ | ------ |
| rollcall1 | 0.763684 | 0.001203 |
| rollcall2 | 0.77706 | 0.003726 |
| rollcall3 | 0.727121 | 0.008745 |  

可以看出rollcall1和rollcall2算法的E的均值差别不大，但是考虑到结果的稳定性采取了rollcall1算法。
- 若有同学缺课，将对缺勤系数进行处理第一次 + 0.05 ,第二次 + 0.5 ,第三次 + 0.5，用以保证偶尔一次缺课不会被一直点名，三次抽取概率增加，几个长期不到的则每一次都+0.5，保证sort后他们仍然排在前列。
